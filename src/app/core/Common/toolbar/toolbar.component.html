<div class="flex p-0 z-10 shadow-md">
  <div id="sidenav" class="bg-blue-500 h-full p-5 pt-8 duration-300 relative group overflow-y-auto overflow-x-hidden overscroll-y-auto" [ngClass]="{
    'w-72': sidenavService.isFixed,
    'w-20 hover:w-72 shadow-md': !sidenavService.isFixed
  }">
    <button (click)="toggleFixed()"
      class="text-white py-2 px-2 h-10 hover:bg-blue-100 hover:text-blue-500 hover:border hover:border-blue-100 rounded-full mb-4 transition flex justify-end">
      <mat-icon>{{ sidenavService.isFixed ? 'lock_open' : 'menu' }}</mat-icon>
    </button>
    <div class="flex items-center justify-center mx-auto rounded-full " [ngClass]="{
      'h-24 mb-6 mt-6': sidenavService.isFixed || sidenavService.isOpen,
      'h-10 m-0 group-hover:h-24 mb-6 mt-6': !sidenavService.isFixed && !sidenavService.isOpen
    }">
      <img src="../../../../assets/images/avatars/male-04.jpg" alt="profile-image" class="object-cover rounded-full" [ngClass]="{
        'h-24 mb-6 mt-6': sidenavService.isFixed || sidenavService.isOpen,
        'h-10 m-0 group-hover:h-24 mb-6 mt-6': !sidenavService.isFixed && !sidenavService.isOpen
      }">
    </div>
    <div class="flex items-center rounded-md bg-gray-300 hover:bg-blue-100 mt-6 py-1"
      [ngClass]="!sidenavService.isOpen ? 'px-1' : 'px-4'">
      <mat-icon class="text-white text-lg block float-left cursor-pointer text-center items-center" [ngClass]="{
        'mr-1': sidenavService.isFixed || sidenavService.isOpen,
        'ml-1 group-hover:mr-1': !sidenavService.isFixed && !sidenavService.isOpen
      }">search</mat-icon>
      <input type="search" placeholder="Buscar" class="mr-1 text-base bg-transparent text-black focus:outline-none" [ngClass]="{
        'w-full': sidenavService.isFixed || sidenavService.isOpen,
        'w-0 group-hover:w-full': !sidenavService.isFixed && !sidenavService.isOpen
      }">
    </div>
    <ul>
      <ng-container *ngFor="let item of Menu; let i = index">
        <li *ngIf="item.submenu; else otherItem" (click)="setSubmenuOpen()"
            class="text-gray-300 text-sm flex items-center gap-x-4 cursor-pointer p-2 hover:bg-blue-100 hover:text-blue-500 rounded-md mt-2 hover:scale-105 transition-transform duration-200 ease-in-out">
          <span class="text-2xl block float-left items-center flex">
            <mat-icon class="">{{ item.icon }}</mat-icon>
          </span>
          <span class="text-base font-medium flex-1 transition-all duration-300" [ngClass]="{
            'opacity-100': sidenavService.isFixed || sidenavService.isOpen,
            'opacity-0 group-hover:opacity-100': !sidenavService.isFixed && !sidenavService.isOpen
          }">
            {{ item.title }}
          </span>
        </li>
        <div *ngIf="item.submenu && submenuOpen" class="pl-3 flex items-center transition-all duration-100 overflow-hidden"
        [ngClass]="{
          'max-h-0 opacity-0': !sidenavService.isFixed && !sidenavService.isOpen,
          'group-hover:max-h-96 group-hover:opacity-100': !sidenavService.isFixed,
          'max-h-96 opacity-100': sidenavService.isFixed || sidenavService.isOpen
          }">
          <ul>
            <ng-container *ngFor="let subItem of item.submenuItems">
              <li (click)="navigateTo(subItem.path)" class="text-sm text-gray-300 items-center gap-x-4 cursor-pointer p-2 hover:bg-blue-100 hover:text-blue-500 rounded-md mt-2 items-center flex hover:scale-105 transition-transform duration-200 ease-in-out">
                <span class="block float-left items-center flex ">
                  <mat-icon>{{ subItem.icon }}</mat-icon>
                </span>
                <span class="mr-1 duration-100" [ngClass]="{
                  'opacity-0 w-0 group-hover:opacity-100 w-full': !sidenavService.isFixed && !sidenavService.isOpen,
                  'group-hover:opacity-100 group-hover:w-auto': !sidenavService.isFixed,
                  'opacity-100 w-auto': sidenavService.isFixed || sidenavService.isOpen
                }">{{ subItem.title }}</span>
              </li>
            </ng-container>
          </ul>
        </div>
        <ng-template #otherItem>
          <li class="text-gray-300 text-sm flex items-center gap-x-4 cursor-pointer p-2 hover:bg-blue-100 hover:text-blue-500 rounded-md mt-2 hover:scale-105 transition-transform duration-200 ease-in-out"
            (click)="navigateTo(item.path)">
            <span class="text-2xl block float-left items-center flex">
              <mat-icon>{{item.icon}}</mat-icon>
            </span>
            <span class="text-base font-medium flex-1 transition-all duration-300" [ngClass]="{
              'opacity-100': sidenavService.isFixed || sidenavService.isOpen,
              'opacity-0 group-hover:opacity-100': !sidenavService.isFixed && !sidenavService.isOpen
              }">
              {{ item.title }}
            </span>
          </li>
        </ng-template>
      </ng-container>
    </ul>
  </div>
</div>